# 博客管理系统功能需求文档

## 项目概述

使用Go语言开发的轻量级博客管理系统，参考HALO系统设计理念，内存占用控制在1GB以内，支持云服务器单机部署。

## 系统约束

- **开发语言**: Go
- **数据库**: SQLite
- **内存限制**: 不超过1GB
- **部署方式**: 云服务器单机部署
- **并发用户**: 100人以内同时在线
- **用户规模**: 注册用户总数10000以内
- **内容规模**: 文章1000篇以内，随念1000篇以内
- **访问量**: 日均100人次，无高并发场景

## 用户角色与权限

### 管理员 (1名)
- 通过配置表配置，唯一管理员
- 拥有系统完整控制权
- 可创建、编辑、删除博客文章和随念
- 可管理用户、评论、系统设置
- 可查看系统日志和统计信息
- 可进行备份恢复和GitHub同步

### 普通用户
- 需要注册账号
- 可浏览所有公开内容
- 可对文章和随念进行评论
- 可对文章和随念进行点赞和收藏
- 不可创建或编辑任何内容

## 功能模块

### 1. 用户模块
- **用户注册**: 支持多种注册方式的扩展架构
  - 当前实现：邮箱验证码注册登录
  - 后期扩展支持：GitHub登录、微信登录、Google登录、手机号注册登录
- **统一认证**: OAuth 2.0兼容的认证架构
- **用户绑定**: 支持多种登录方式绑定到同一用户账号
- **JWT令牌认证**: 统一的令牌认证机制
- **个人中心**: 个人信息管理、第三方账号绑定管理、收藏列表

### 2. 博客文章模块
- **文章管理**: 创建、编辑、删除博客文章
- **状态管理**: 发布状态与草稿状态切换
- **评论系统**: 文章评论的发表与管理
- **标签分类**: 完整的标签和分类体系
- **搜索功能**: 全文搜索博客文章内容
- **互动功能**: 点赞、收藏功能
- **统计分析**: 阅读量、评论数等数据统计

### 3. 随念模块 (类似微博)
- **随念管理**: 创建、编辑、删除随念
- **内容限制**: 300字以内纯文本
- **状态管理**: 发布状态与草稿状态管理
- **多媒体支持**: 支持图片、视频上传 (复用图床模块)
- **评论系统**: 随念评论功能
- **互动功能**: 点赞、收藏功能
- **时间线展示**: 按时间顺序展示随念内容
- **统计分析**: 阅读量、评论数等统计
- **分类标签**: 与博客文章共用分类标签系统，通过类型字段区分

### 4. 图床模块
- **图片上传**: 支持常见图片格式上传
- **视频上传**: 支持视频文件上传
- **文件存储**: 本地文件系统存储
- **访问控制**: 仅授权用户可上传
- **文件管理**: 文件列表、删除功能

### 5. 系统模块
- **系统配置**: 基本参数设置管理
- **API管理**: RESTful API接口
- **API文档**: 自动生成API文档
- **数据库管理**: SQLite数据库维护

### 6. 后台管理模块
- **用户管理**: 用户列表、状态管理
- **内容管理**: 博客文章和随念的统一管理
- **评论管理**: 评论审核、删除功能
- **系统日志**: 操作日志查看和分析
- **备份恢复**: 数据库备份和恢复功能
- **GitHub同步**: 内容同步到GitHub仓库

### 7. GitHub同步模块
- **同步内容**: 博客文章和随念的Markdown格式同步
- **同步方向**: 单向同步 (系统 → GitHub)
- **触发方式**:
  - 自动定时同步
  - 手动触发同步
  - 内容发布/更新时自动同步
- **仓库结构**: 按分类组织文件夹结构
- **媒体文件**: 图片、视频文件不进行同步

### 8. 部署模块
- **GitHub Action**: 支持通过GitHub Action自动部署到服务器
- **容器化**: 支持Docker容器部署
- **配置管理**: 环境配置文件管理

## 技术要求

### 性能要求
- 内存占用不超过1GB
- 支持100人并发访问
- 响应时间在2秒以内
- 数据库查询优化

### 安全要求
- 用户密码加密存储
- JWT令牌认证
- SQL注入防护
- XSS攻击防护
- 文件上传安全检查

### 可用性要求
- 系统稳定性高
- 数据备份机制
- 错误日志记录
- 友好的错误提示