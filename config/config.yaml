# 应用配置
app:
  name: "blog-system"
  version: "1.0.0"
  env: "development"  # development, staging, production
  debug: true

# 服务器配置
server:
  port: 8080
  host: "0.0.0.0"
  mode: "debug"  # debug, release, test
  read_timeout: 30    # 秒
  write_timeout: 30   # 秒
  idle_timeout: 120   # 秒

# 数据库配置
database:
  type: "sqlite"  # sqlite, mysql, postgres
  dsn: "data/blog.db"  # SQLite文件路径
  # MySQL配置示例:
  # dsn: "user:password@tcp(localhost:3306)/blog?charset=utf8mb4&parseTime=True&loc=Local"
  # PostgreSQL配置示例:
  # dsn: "host=localhost user=gorm password=gorm dbname=gorm port=9920 sslmode=disable TimeZone=Asia/Shanghai"

  # 连接池配置
  max_open_conns: 100
  max_idle_conns: 10
  conn_max_lifetime: 3600  # 秒

# 日志配置
log:
  level: "debug"  # debug, info, warn, error
  format: "json"  # json, text
  output: "stdout"  # stdout, stderr, file
  file_path: "logs/app.log"
  max_size: 100    # MB
  max_backups: 10
  max_age: 30      # 天
  compress: true

# JWT配置
jwt:
  secret: "your-super-secret-jwt-key-change-in-production"
  access_token_duration: 3600    # 秒 (1小时)
  refresh_token_duration: 604800 # 秒 (7天)
  issuer: "blog-system"

# 邮件配置
email:
  enabled: false  # 是否启用邮件功能
  smtp_host: "smtp.gmail.com"
  smtp_port: 587
  username: "your-email@gmail.com"
  password: "your-app-password"
  from: "your-email@gmail.com"
  from_name: "Blog System"

  # 模板配置
  template_path: "templates/email"

  # 开发模式配置
  development:
    enabled: true
    save_to_file: true
    file_path: "logs/email.log"

# OAuth配置
oauth:
  # GitHub
  github:
    enabled: false
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/github/callback"

  # Google
  google:
    enabled: false
    client_id: ""
    client_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/google/callback"

  # 微信
  wechat:
    enabled: false
    app_id: ""
    app_secret: ""
    redirect_url: "http://localhost:8080/api/v1/auth/wechat/callback"

# 缓存配置
cache:
  type: "memory"  # memory, redis
  ttl: 300        # 秒

  # Redis配置
  redis:
    addr: "localhost:6379"
    password: ""
    db: 0
    pool_size: 10

# 文件上传配置
upload:
  # 存储配置
  storage_type: "local"  # local, oss, s3
  storage_path: "uploads"
  base_url: "http://localhost:8080/uploads"

  # 文件限制
  max_file_size: 10485760  # 10MB
  allowed_types:
    - "image/"
    - "video/"
    - "application/pdf"
    - "text/"

  # 图片处理配置
  image:
    max_width: 2048
    max_height: 2048
    quality: 85
    thumbnail_size: 200

# 安全配置
security:
  # CORS配置
  cors:
    allowed_origins:
      - "http://localhost:3000"
      - "http://localhost:8080"
    allowed_methods:
      - "GET"
      - "POST"
      - "PUT"
      - "DELETE"
      - "OPTIONS"
    allowed_headers:
      - "Origin"
      - "Content-Type"
      - "Authorization"
    allow_credentials: true

  # 速率限制
  rate_limit:
    enabled: true
    requests_per_minute: 100
    burst: 10

  # 密码策略
  password_policy:
    min_length: 6
    max_length: 50
    require_uppercase: false
    require_lowercase: false
    require_numbers: false
    require_symbols: false

# 监控配置
monitoring:
  # 健康检查
  health_check:
    enabled: true
    path: "/health"
    interval: 30  # 秒

  # 指标收集
  metrics:
    enabled: false
    path: "/metrics"

  # 性能分析
  pprof:
    enabled: false
    path: "/debug/pprof"

# 通知配置
notification:
  # 系统通知
  system:
    enabled: true
    email: false
    webhook: false

  # Webhook配置
  webhook:
    url: ""
    secret: ""
    timeout: 30  # 秒

# 内容配置
content:
  # 文章配置
  post:
    max_title_length: 200
    max_content_length: 1000000  # 1MB
    auto_save_interval: 30       # 秒
    excerpt_length: 200

  # 评论配置
  comment:
    max_content_length: 1000
    auto_approve: true
    allow_nested: true
    max_nesting_level: 3

  # 随念配置
  moment:
    max_content_length: 300
    max_media_count: 9

# 备份配置
backup:
  enabled: false
  interval: 86400  # 秒 (24小时)
  retention: 30      # 天
  path: "backups"

# 开发配置
development:
  hot_reload: true
  debug_sql: true
  mock_external_services: true

# 生产配置
production:
  hot_reload: false
  debug_sql: false
  mock_external_services: false