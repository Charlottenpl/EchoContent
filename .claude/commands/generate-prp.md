# 创建PRP (Project Requirements Document)

## 🎯 命令概述

本命令用于创建项目需求文档(PRP)，通过三步协作流程确保需求理解的准确性和技术方案的完整性。

**使用方法**: `/generate-prp <功能描述文件路径>`

## 🔄 协作流程

### 第一步：需求澄清与理解 (Clarify & Understand)

**目标**: 深度理解用户需求，确保无歧义、无遗漏

**执行流程**:
1. **深度分析**: 仔细阅读功能文件 `$ARGUMENTS`，基于行业最佳实践思考功能需求
2. **需求总结**: 整理初步理解的需求要点，必须包含以下方面：

- 📐 架构概述
    - 整体设计思路和架构风格
    - 关键设计决策的取舍说明
    - 系统边界和接口定义

- 🧩 模块/组件划分
    - 系统拆分的独立模块
    - 各模块的职责和接口
    - 模块间的依赖关系

- 🗄️ 数据结构设计
    - 核心数据模型定义
    - 数据库表结构设计（如适用）
    - 数据流和状态管理

- ⚙️ 核心业务逻辑
    - 关键业务流程的详细描述
    - 核心算法的伪代码实现
    - 异常处理和错误恢复机制

- 🛠️ 技术选型
    - 框架、库、工具的选择理由
    - 技术栈的兼容性分析
    - 性能、安全性、可维护性考量

- ⚠️ 风险评估与对策
    - 技术风险识别和评估
    - 潜在问题的预防措施
    - 应急预案和回退策略

3. **需求点确认**：把需求总结中的每个点都以命令行交互式的形式和我确认一遍，提问方式为命令行交互式界面，用户可以使用方向键选择想要的选项或者多选项，对于需要用户输入的内容，用户可以直接在命令行中输入。每确认一个模块的需求，都要总结并向我汇报，当我说确认之后继续下个模块，如果我有修改意见，请根据我的意见对当前模块重新执行需求点确认。
4. **模糊点识别**: 识别需求中不清晰、不完整或存在歧义的部分,并整理成需求澄清点
5. **交互式澄清**: 这一步一定不要跳过，一定要以逐条提问的形式在命令行向用户询问需求澄清点，并等待用户逐条在命令行中回答。提问方式为命令行交互式界面，用户可以使用方向键选择想要的选项或者多选项，对于需要用户输入的内容，用户可以直接在命令行中输入。
6. **需求确认**: 确认是否理解了所有明确了需求要点，是否有遗漏或错误。
7. **保存文件**：根据以上内容，输出以下文件
    - `PRPs/feature.md` - 最终确认的需求文档
    - `PRPs/feature-question.md` - 问答澄清记录（如有）

**质量标准**:
- 需求描述清晰具体，可量化验证
- 覆盖所有业务场景和边界条件
- 包含成功标准和验收条件

### 第二步：需求确认 (Confirm & Validate)

**目标**: 获得用户对需求文档的最终确认

**执行流程**:
1. 用户阅读 `PRPs/feature.md` 中的需求文档
2. 用户确认需求理解是否准确
3. 如有不一致，用户提出修改意见
4. 返回第一步进行需求澄清（如需要）
5. 获得最终确认后进入第三步

**确认要点**:
- 功能完整性：是否覆盖了所有必需功能
- 准确性：需求描述是否与用户期望一致
- 可行性：技术实现是否可行
- 优先级：各功能的重要程度和紧急程度

### 第三步：技术方案设计 (Design & Propose)

**目标**: 制定详细的技术实现方案

**输出文档**: `PRPs/technical-design.md`

**必须包含的内容**:

#### 📐 架构概述
- 整体设计思路和架构风格
- 关键设计决策的取舍说明
- 系统边界和接口定义

#### 🧩 模块/组件划分
- 系统拆分的独立模块
- 各模块的职责和接口
- 模块间的依赖关系

#### 🗄️ 数据结构设计
- 核心数据模型定义
- 数据库表结构设计（如适用）
- 数据流和状态管理

#### ⚙️ 核心业务逻辑
- 关键业务流程的详细描述
- 核心算法的伪代码实现
- 异常处理和错误恢复机制

#### 🛠️ 技术选型
- 框架、库、工具的选择理由
- 技术栈的兼容性分析
- 性能、安全性、可维护性考量

#### ⚠️ 风险评估与对策
- 技术风险识别和评估
- 潜在问题的预防措施
- 应急预案和回退策略

## 📋 质量检查清单

在完成PRP创建前，请确保：
- [ ] 所有需求疑问都已得到澄清
- [ ] 技术方案覆盖所有功能需求
- [ ] 架构设计合理且可扩展
- [ ] 风险识别充分，对策具体
- [ ] 文档格式规范，内容清晰

## ⚠️ 重要提醒

- **此步骤不可跳过**：必须等待用户的"确认"或"修改意见"
- **迭代优化**：根据用户反馈持续完善技术方案
- **文档版本控制**：保留方案设计的历史版本以供参考
